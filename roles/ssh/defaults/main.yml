---
# roles/ssh/defaults/main.yml — Valores padrão para a role ssh
# Sobrescreva em group_vars ou host_vars conforme necessário

# Namespace de variáveis para SSH
ssh:
  port: 2222
  password_auth: "no"
  permit_root_login: "no"
  max_auth_tries: 3
  max_sessions: 5
  login_grace_time: 30
  client_alive_interval: 180
  client_alive_count_max: 2
  banner_path: /etc/ssh/banner
  allow_groups: "ssh-access"

# Compatibilidade com variáveis legadas (flat)
ssh_port: "{{ ssh.port | default(2222) }}"
ssh_password_auth: "{{ ssh.password_auth | default('no', true) }}"
ssh_permit_root_login: "{{ ssh.permit_root_login | default('no', true) }}"
ssh_max_auth_tries: "{{ ssh.max_auth_tries | default(3) }}"
ssh_max_sessions: "{{ ssh.max_sessions | default(5) }}"
ssh_login_grace_time: "{{ ssh.login_grace_time | default(30) }}"
ssh_client_alive_interval: "{{ ssh.client_alive_interval | default(180) }}"
ssh_client_alive_count_max: "{{ ssh.client_alive_count_max | default(2) }}"
ssh_banner_path: "{{ ssh.banner_path | default('/etc/ssh/banner', true) }}"
ssh_allow_groups: "{{ ssh.allow_groups | default('ssh-access', true) }}"

# Usuário admin para membership no grupo de acesso SSH
admin_user: "{{ user.admin.name | default('feuser', true) }}"
